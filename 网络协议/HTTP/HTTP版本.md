# HTTP 版本

## Http 1.0 与 1.1 区别

- 1.0 对于每个连接都得建立一次连接, 一次只能传送一个请求和响应, 请求就会关闭
- 1.1 在同一个连接中可以传送多个请求和响应, 多个请求可以重叠和同时进行
- 1.1 中引入了 `ETag` 头, 它的值 `entity tag` 可以用来唯一的描述一个资源. 请求消息中可以使用 `If-None-Match` 头域来匹配资源的 `entity-tag` 是否有变化
- 1.1 新增了 `Cache-Control` 头域(消息请求和响应请求都可以使用), 它支持一个可扩展的指令子集
- 1.0 中只定义了 16 个状态响应码, 对错误或警告的提示不够具体. http1.1 引入了一个 `Warning` 头域, 增加对错误或警告信息的描述. 且新增了 24 个状态响应码

## Http1.1 和 Http2 之间的区别

- HTTP/2 采用二进制格式化而非文本格式
- HTTP/2 是完全的多路复用，只需要一个链接即可实现并行
- 使用报头压缩，降低了开销
- 服务器推送(`Server Push`)，服务端会提前给客户端推送必要的资源

## Http3.0 与前期协议的区别

是基于 `QUIC` 协议，基于 `UDP`

- 自定义连接机制：TCP 以 IP/端口标识，变化重新连接握手；UDP 是以 64 位 ID 标识，是无连接
- 自定义重传机制：TCP 使用序号和应答传输，`QUIC` 是使用递增序号传输；无阻塞的多路复用，同一条 `QUIC` 可以创建多个 steam
- 0-RTT：使用类似 TCP 快速打开的技术，缓存当前会话的上下文，在下次恢复会话的时候，只需将之前的缓存传递给服务端验证通过即可进行传输
- 多路复用：虽然 HTTP/2 支持多路复用，但 TCP 协议是没有该功能的。QUIC 则原生实现该功能，并且传输的单个数据流可以保证有序交付且不会影响其他的数据流
- 加密认证的报文：TCP 协议头部没有经过任何加密和认证，所以在传输过程中很容易被中间网络设备篡改，注入和窃听，比如修改序列号、滑动窗口。这些行为有可能是出于性能优化，也有可能是主动攻击。但是 QUIC 的 packet 可以说是武装到了牙齿。除了个别报文比如 `PUBLIC_RESET` 和 `CHLO`，所有报文头部都是经过认证的，报文 Body 都是经过加密的。这样只要对 QUIC 报文任何修改，接收端都能够及时发现，有效地降低了安全风险
